[{"D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\index.js":"1","D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\App.js":"2","D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\firebase.js":"3","D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\services\\firestoreFunctions.js":"4","D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\components\\GamePage.jsx":"5","D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\context\\StepContext.js":"6","D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\components\\assets\\js\\labyrinthe.js":"7","D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\components\\Loader.js":"8","D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\components\\Home.js":"9","D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\components\\Content.js":"10","D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\components\\ManageRoom.js":"11","D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\context\\PlayerContext.js":"12","D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\components\\ManageRoomContent.js":"13","D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\components\\ManageRoomPitch.js":"14","D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\components\\Map.js":"15","D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\components\\Glitch.js":"16"},{"size":432,"mtime":1610477427279,"results":"17","hashOfConfig":"18"},{"size":1030,"mtime":1610586600618,"results":"19","hashOfConfig":"18"},{"size":607,"mtime":1610473432616,"results":"20","hashOfConfig":"18"},{"size":4245,"mtime":1610716547720,"results":"21","hashOfConfig":"18"},{"size":1354,"mtime":1610680892582,"results":"22","hashOfConfig":"18"},{"size":112,"mtime":1610551935302,"results":"23","hashOfConfig":"18"},{"size":3160,"mtime":1610558874340,"results":"24","hashOfConfig":"18"},{"size":434,"mtime":1610659066164,"results":"25","hashOfConfig":"18"},{"size":1513,"mtime":1610657559471,"results":"26","hashOfConfig":"18"},{"size":495,"mtime":1610680093026,"results":"27","hashOfConfig":"18"},{"size":2183,"mtime":1610682098778,"results":"28","hashOfConfig":"18"},{"size":136,"mtime":1610585419116,"results":"29","hashOfConfig":"18"},{"size":3669,"mtime":1610682643239,"results":"30","hashOfConfig":"18"},{"size":187,"mtime":1610617167446,"results":"31","hashOfConfig":"18"},{"size":2841,"mtime":1610680083395,"results":"32","hashOfConfig":"18"},{"size":3268,"mtime":1610710345165,"results":"33","hashOfConfig":"18"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},"1ljoucx",{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"43","messages":"44","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"45","usedDeprecatedRules":"36"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"50","usedDeprecatedRules":"51"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"54","usedDeprecatedRules":"36"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"57","usedDeprecatedRules":"36"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"60","usedDeprecatedRules":"36"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"63","usedDeprecatedRules":"36"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"68","usedDeprecatedRules":"36"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"73","usedDeprecatedRules":"36"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"76","usedDeprecatedRules":"36"},"D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\index.js",[],["77","78"],"D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\App.js",[],"D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\firebase.js",[],"D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\services\\firestoreFunctions.js",["79"],"D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\components\\GamePage.jsx",["80","81","82","83","84","85"],"import firebase from 'firebase';\r\nimport Loader from './Loader';\r\nimport Content from './Content';\r\nimport React, {useEffect, useState, useContext } from \"react\"\r\nimport {useParams, useHistory} from \"react-router-dom\"\r\nimport StepContext from \"../context/StepContext\";\r\nimport Cookie from 'js-cookie';\r\n\r\nconst GamePage = () => {\r\n    const playerID = Cookie.get('playerID');\r\n    let { id } = useParams()\r\n    let [step, setStep] = useContext(StepContext);\r\n    const history = useHistory();\r\n\r\n    const isReady = () => {\r\n        if(step.isReady){\r\n            if(step.hasBegin != true){\r\n                return history.replace(\"/room/\" + id);\r\n            }\r\n            var loader = document.getElementById('loader');\r\n            return (\r\n                launchRoom()\r\n            )\r\n        }\r\n    }\r\n\r\n    const launchRoom = () => {\r\n        return (\r\n            <Content></Content>\r\n        )\r\n    }\r\n\r\n    function requestDB() {\r\n        const db = firebase.firestore();\r\n        const doc = db.collection('Room').doc(id)\r\n        doc.onSnapshot(snapshot => {\r\n            step = setStep(snapshot.data());\r\n        });\r\n      }\r\n\r\n    useEffect( () => {\r\n        step = [];\r\n        requestDB();\r\n    }, [])\r\n      \r\n    return (\r\n        <div id=\"root-container\">\r\n            {isReady()}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default GamePage","D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\context\\StepContext.js",[],"D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\components\\assets\\js\\labyrinthe.js",["86","87","88","89","90","91","92"],"import $ from 'jquery'\r\n\r\nvar canvas = $('#GameBoardCanvas');\r\n//The game board 1 = walls, 0 = free space, and -1 = the goal\r\nvar board = [\r\n    [ 1, 0, 1, 1, -2, 1, 1, 1, 1, 1],\r\n    [ 1, 0, 1, 1, 1, 0, 0, 0, 0, 1],\r\n    [ 1, 0, 0, 0, 0, 0, 1, 1, 0, 1],\r\n    [ 1, 0, 1, 1, 1, 1, 1, 1, 0, 1],\r\n    [ 1, 1, 1, 0, 0, 0, 1, 1, 0, -2],\r\n    [ -2, 0, 1, 1, 1, 1, 1, 0, 0, 1],\r\n    [ 1, 0, 1, 0, 0, 0, 0, 0, 1, 1],\r\n    [ 1, 0, 1, 0, 1, 1, 1, 1, 0, 1],\r\n    [ 1, 0, 0, 0, 1, 1, 1, 1, 1, 1],\r\n    [ 1, 1, 1, 1, 1, 1, 1, -1, 1, 1]\r\n];\r\nvar player = {\r\n    x: 1,\r\n    y: 0\r\n};\r\n\r\nvar wrongEnd = []\r\n\r\nvar end = {\r\n    x: 0,\r\n    y: 0,\r\n}\r\n\r\n//Draw the game board\r\nfunction draw(){\r\n    var width = canvas.width();\r\n    var blockSize = width/board.length;\r\n    var ctx = canvas[0].getContext('2d');\r\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\r\n    ctx.clearRect(0, 0, width, width);\r\n    ctx.fillStyle=\"white\";\r\n    for(var y = 0; y < board.length; y++){\r\n        for(var x = 0; x < board[y].length; x++){\r\n            if(board[y][x] === 1){\r\n                ctx.fillRect(x*blockSize, y*blockSize, blockSize, blockSize);\r\n            }\r\n            else if(board[y][x] === -1){\r\n                // BONNE SORTIE\r\n                ctx.beginPath();\r\n                ctx.lineWidth = 5;\r\n                ctx.strokeStyle = \"gold\";\r\n                ctx.moveTo(x*blockSize, y*blockSize);\r\n                ctx.lineTo((x+1)*blockSize, (y+1)*blockSize);\r\n                ctx.moveTo(x*blockSize, (y+1)*blockSize);\r\n                ctx.lineTo((x+1)*blockSize, y*blockSize);\r\n                ctx.stroke();\r\n                end.x = x;\r\n                end.y = y;\r\n            } else if(board[y][x] === -2){\r\n                // MAUVAISE SORTIE\r\n                let NewWrongEnd = [x, y];\r\n                wrongEnd.push(NewWrongEnd);\r\n                ctx.beginPath();\r\n                ctx.lineWidth = 5;\r\n                ctx.strokeStyle = \"red\";\r\n                ctx.moveTo(x*blockSize, y*blockSize);\r\n                ctx.lineTo((x+1)*blockSize, (y+1)*blockSize);\r\n                ctx.moveTo(x*blockSize, (y+1)*blockSize);\r\n                ctx.lineTo((x+1)*blockSize, y*blockSize);\r\n                ctx.stroke();\r\n            }\r\n        }\r\n    }\r\n    ctx.beginPath();\r\n    var half = blockSize/2;\r\n    ctx.fillStyle = \"blue\";\r\n    ctx.arc(player.x*blockSize+half, player.y*blockSize+half, half, 0, 2*Math.PI);\r\n    ctx.fill();\r\n}\r\n\r\nfunction canMove(x, y){\r\n    return (y>=0) && (y<board.length) && (x >= 0) && (x < board[y].length) && (board[y][x] != 1);\r\n}\r\n\r\nfunction isEnd(x, y){\r\n    if (x == end.x && y == end.y){\r\n        console.log('finished');\r\n    };\r\n    for(var i = 0; i<=wrongEnd.length; i++){\r\n    }\r\n}\r\n\r\n$(document).keyup(function(e){\r\n    if((e.which == 38) && canMove(player.x, player.y-1))//Up arrow\r\n        player.y--;\r\n    else if((e.which == 40) && canMove(player.x, player.y+1)) // down arrow\r\n        player.y++;\r\n    else if((e.which == 37) && canMove(player.x-1, player.y))\r\n        player.x--;\r\n    else if((e.which == 39) && canMove(player.x+1, player.y))\r\n        player.x++;\r\n    draw();\r\n    e.preventDefault();\r\n    isEnd(player.x, player.y);\r\n});\r\n\r\ndraw();",["93","94"],"D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\components\\Loader.js",["95","96","97"],"import React, { useContext, useState } from 'react';\r\nimport StepContext from \"../context/StepContext\";\r\n\r\nconst Loader = (props) => {\r\n\r\n    let [step, setStep] = useContext(StepContext)\r\n\r\n    return (\r\n        <div id=\"loader\" style={props.style}>\r\n            <p class=\"loader-text\">{props.text}</p>\r\n            <div class=\"lds-facebook\"><div></div><div></div><div></div></div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Loader;","D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\components\\Home.js",["98","99"],"import React, { useContext } from 'react';\r\nimport firestoreFunctions from '../services/firestoreFunctions';\r\nimport {useHistory} from 'react-router-dom'\r\nimport StepContext from \"../context/StepContext\";\r\nimport './assets/css/home.css'\r\nimport Cookies from 'js-cookie';\r\n\r\nconst  Home = () => {\r\n    const history = useHistory();\r\n    // const{step, setStep} = useContext(StepContext)\r\n\r\n    const CreateRoom = () => {\r\n        Cookies.remove('playerID');\r\n        const newRoom = firestoreFunctions.firebaseCreateRoom();\r\n        history.push(\"/room/\" + newRoom);\r\n    }\r\n\r\n    const JoinRoom = () => {\r\n        var room = document.getElementById('room-number').value;\r\n        history.push(\"/room/\" + room);\r\n    }\r\n\r\n    return (\r\n        <div id=\"room-form-container\">\r\n            <div class=\"room-form-container-infos\">\r\n                <div class=\"logo\">Home Invader</div>\r\n                <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Id corrupti, ea nemo labore mollitia unde repellat omnis qui dolores</p>\r\n            </div>\r\n            <div class=\"form\">\r\n                <form>\r\n                    <div class=\"join-room\">\r\n                        <input type=\"text\" id=\"room-number\"></input>\r\n                        <input type=\"submit\" value=\"join\" onClick={JoinRoom}></input>\r\n                    </div>\r\n                    <button onClick={CreateRoom}>Créer une room</button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n    \r\n}\r\n\r\nexport default Home;","D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\components\\Content.js",["100","101","102"],"import React, { useContext} from 'react';\r\nimport StepContext from \"../context/StepContext\";\r\nimport {useParams} from \"react-router-dom\"\r\nimport './assets/css/content.css'\r\nimport Map from './Map.js'\r\nimport Glitch from './Glitch';\r\n\r\nconst Content = () => {\r\n    let { id } = useParams()\r\n    let [step, setStep] = useContext(StepContext)\r\n\r\n    return (\r\n        <div class=\"content\">\r\n            <Map></Map>\r\n            <Glitch></Glitch>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Content;","D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\components\\ManageRoom.js",["103","104","105"],"import React, { useContext, useEffect } from 'react';\r\nimport {useParams} from \"react-router-dom\"\r\nimport StepContext from \"../context/StepContext\";\r\nimport firebase from 'firebase'\r\nimport firestoreFunctions from '../services/firestoreFunctions'\r\nimport './assets/css/manageroom.css'\r\nimport Loader from './Loader';\r\nimport ManageRoomContent from './ManageRoomContent';\r\nimport ManageRoomPitch from './ManageRoomPitch';\r\nimport Cookies from 'js-cookie'\r\n\r\nconst ManageRoom = () => {\r\n  // INIT VARIABLE\r\n  let { id } = useParams();\r\n  let [step, setStep] = useContext(StepContext);\r\n  let pitch = \"\";\r\n\r\n  // INIT PLAYER IDENTITY IN BROWSER + DB\r\n  const setPlayerIdentity = () => {\r\n      let players = step.player;\r\n      var length = Object.values(players).length;\r\n      if(Cookies.get('playerID')){\r\n        return\r\n      }\r\n      for(let i = 1; i<length; i++) {\r\n          var p = 'p'+i;\r\n          const active = players[p].active;\r\n          console.log('player ' + i + 'is active');\r\n          if(active != true) {\r\n              let setActive = 'player.p'+ i + '.active';\r\n              let getID = players[p].id;\r\n              Cookies.set('playerID', i);\r\n              firestoreFunctions.firebaseWrite(setActive, true, id);\r\n              break\r\n          }\r\n      }\r\n  }\r\n\r\n  // VERIFICATION THAT WE'RE CONNECTED TO DB\r\n  const isReady = () => {\r\n    var loader = document.getElementById('loader');\r\n    if(step.isReady && loader){\r\n      pitch = step.pitch;\r\n        setPlayerIdentity();\r\n        return (              \r\n            loader.style.display = \"none\",\r\n            <ManageRoomContent></ManageRoomContent>\r\n        )\r\n    }\r\n  }\r\n\r\n  \r\n  function requestDB() {\r\n    const db = firebase.firestore();\r\n    const doc = db.collection('Room').doc(id)\r\n    doc.onSnapshot(snapshot => {\r\n        step = setStep(snapshot.data());\r\n    });\r\n  }\r\n\r\n  // CONNECTION TO DB ON COMPONENT INIT + SET CONTEXT WITH DATA\r\n  useEffect( () => {\r\n    requestDB();\r\n  }, [])\r\n\r\n  return (\r\n    <div id=\"root-container\">\r\n        <Loader></Loader>\r\n        <ManageRoomPitch pitch={pitch}></ManageRoomPitch>\r\n        {isReady()};\r\n    </div>\r\n\r\n  )\r\n}\r\n\r\nexport default ManageRoom","D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\context\\PlayerContext.js",[],"D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\components\\ManageRoomContent.js",["106","107","108","109","110","111"],"import StepContext from '../context/StepContext'\r\nimport React, {useContext, useEffect} from 'react';\r\nimport {useHistory, useParams} from \"react-router-dom\"\r\nimport './assets/css/manageroom.css'\r\nimport Cookies from 'js-cookie'\r\nimport firebase from '../firebase';\r\nimport firestoreFunctions from '../services/firestoreFunctions';\r\nimport Loader from './Loader';\r\n\r\nconst ManageRoomContent = () => {\r\n  let { id } = useParams()\r\n  let [step, setStep] = useContext(StepContext)\r\n  const history = useHistory();\r\n  const db = firebase.firestore();\r\n  const ID =  Cookies.get('playerID');\r\n  const playerP = 'p'+ID;\r\n\r\n  useEffect(() => {\r\n    if(Cookies.get('playerID')){\r\n      var query = `player.${playerP}.isActive`;\r\n      if(step.player[playerP].pseudo != \"\"){\r\n        history.replace('/game/' + id);\r\n      }\r\n    };\r\n  })\r\n\r\n  // FUNCTION TO JOIN A GAME (THAT CALL ASYNC)\r\n  const JoinGame = () => {\r\n    const pseudo = document.getElementById('player-pseudo').value;\r\n    const playerID = 'p' + Cookies.get('playerID'); \r\n    const dataToBatch = {};\r\n    dataToBatch[`player.${playerID}.pseudo`] = pseudo;\r\n    if (document.getElementById('team-name')){\r\n      const teamName = document.getElementById('team-name').value;\r\n      dataToBatch[`team.name`] = teamName;\r\n      dataToBatch[`hasBegin`] = true;\r\n    }\r\n    firestoreFunctions.updateBatch(db, id, dataToBatch);\r\n  }\r\n\r\n  const isCreator = () => {\r\n    if (ID == 1){\r\n      return (\r\n        <input type=\"text\" id=\"team-name\" placeholder=\"Nom de l'équipe\" required></input>\r\n      )\r\n    }\r\n  }\r\n\r\n  const canLaunch = () => {\r\n    if (ID == 1){\r\n      return(\r\n        <button onClick={JoinGame}>Rejoindre la partie</button>\r\n      )\r\n    } else {\r\n      return(\r\n        <p class=\"waiting-message\">En attente de joueurs...</p>,\r\n        <button onClick={JoinGame}>Définir le pseudo</button>\r\n      )\r\n    }\r\n  }\r\n\r\n  // FUNCTION THAT VERIFY AND UPDATE CHARACTER\r\n  function verifyCharacter(characterId) {\r\n    const playerID = 'p' + Cookies.get('playerID'); \r\n    const data =  {};\r\n    data[`player.${playerID}.characterId`] = characterId;\r\n    firestoreFunctions.updateBatch(db, id, data);\r\n  }\r\n\r\n  const selectCharacter = ({currentTarget}) => {\r\n    let characterSelector = document.querySelectorAll('.character');\r\n    characterSelector.forEach(elem => {\r\n      elem.classList.remove('selected');\r\n    })\r\n    currentTarget.classList.add('selected');\r\n    verifyCharacter(currentTarget.id);\r\n  }\r\n\r\n  return (\r\n    <div class=\"room-manager\">\r\n      <p class=\"welcome\">Bienvenue joueur {Cookies.get('playerID')}</p> \r\n      <input type=\"text\" id=\"player-pseudo\" placeholder=\"Pseudo\"></input>\r\n      {isCreator()}\r\n      <div class=\"select-characters\">\r\n        <div id=\"c1\" class=\"character\" onClick={(event) => selectCharacter(event)}>\r\n          <div class=\"character-icon\"></div>\r\n          <span class=\"character-name\">A</span>\r\n        </div>\r\n        <div id=\"c2\" class=\"character\" onClick={(event) => selectCharacter(event)}>\r\n          <div class=\"character-icon\"></div>\r\n          <span class=\"character-name\">B</span>\r\n        </div>\r\n        <div id=\"c3\" class=\"character\" onClick={(event) => selectCharacter(event)}>\r\n          <div class=\"character-icon\"></div>\r\n          <span class=\"character-name\">C</span>\r\n        </div>\r\n        <div id=\"c4\" class=\"character\" onClick={(event) => selectCharacter(event)}>\r\n          <div class=\"character-icon\"></div>\r\n          <span class=\"character-name\">D</span>\r\n        </div>\r\n      </div>\r\n      {canLaunch()}\r\n      <p class=\"room-id\">Code à partager : <span>{id}</span></p>\r\n    </div>\r\n  )\r\n  }\r\n\r\nexport default ManageRoomContent","D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\components\\ManageRoomPitch.js",[],"D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\components\\Map.js",["112","113","114"],"import React, { useContext, useEffect} from 'react';\r\nimport {useParams} from \"react-router-dom\"\r\nimport StepContext from \"../context/StepContext\";\r\nimport './assets/css/map.css'\r\nimport Cookie from 'js-cookie'\r\n// import firestoreFunctions from '../services/firestoreFunctions'\r\nimport firebase from '../firebase';\r\n\r\nconst Map = () => {\r\n    const pos = \"\"\r\n    const db = firebase.firestore();\r\n    let [step, setStep] = useContext(StepContext)\r\n    const ID = Cookie.get('playerID');\r\n    const playerP = 'p'+ID;\r\n    let { id } = useParams();\r\n\r\n    // ASYNC FUNCTION TO UPDATE DATABASE\r\n    function updateBatch(db, roomID, dataToBatch) {  \r\n        console.log(db);  \r\n        const batch = db.batch();\r\n\r\n        const sfRef = db.collection('Room').doc(roomID);\r\n        sfRef.update(dataToBatch);\r\n\r\n        batch.commit();\r\n    }\r\n\r\n    function playerMove (event) {\r\n        event.preventDefault();\r\n        const newZone = event.currentTarget.id;\r\n        const dataToBatch = {};\r\n        dataToBatch[`player.${playerP}.zone`] = newZone;\r\n        updateBatch(db, id, dataToBatch);\r\n        let characterSelector = document.querySelectorAll('.room');\r\n        characterSelector.forEach(elem => {\r\n            elem.classList.remove('current-pos');\r\n        })\r\n        event.currentTarget.classList.add('current-pos');\r\n    }\r\n\r\n    let playersTab = [];\r\n    const checkIfChanged = () => {\r\n        // MISE A JOUR DES AUTRES JOUEURS\r\n        let players = step.player;\r\n        let newPlayersTab = Object.entries(players);\r\n        if(playersTab != newPlayersTab) {\r\n            // SUPPRESSION DES ANCIENNES BULLES\r\n            let rooms = document.querySelectorAll('.room');\r\n            for(let i = 0; i<rooms.length; i++){\r\n                rooms[i].innerHTML = \"\";\r\n            }\r\n\r\n            for(var i = 0; i<newPlayersTab.length; i++) {\r\n                const playerPos = newPlayersTab[i][1].zone;\r\n                const player = newPlayersTab[i][0];\r\n                let parent = document.getElementById(playerPos);\r\n                let div = document.createElement('div');\r\n                div.innerHTML = player;\r\n                if(parent){\r\n                    parent.appendChild(div);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        checkIfChanged();\r\n    })\r\n\r\n    return(\r\n        <div id=\"player-map\">\r\n            <p class=\"your-pos\">Vous etes en position : {step.player[playerP].zone}</p>\r\n            <div class=\"room\" id=\"A\" onClick={(event) => playerMove(event)}>A</div>\r\n            <div class=\"room\" id=\"B\" onClick={(event) => playerMove(event)}>B</div>\r\n            <div class=\"room\" id=\"C\" onClick={(event) => playerMove(event)}>C</div>\r\n            <div class=\"room\" id=\"D\" onClick={(event) => playerMove(event)}>D</div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Map;","D:\\Projets\\digital-event-2020\\digital-event-2021-main-app\\src\\components\\Glitch.js",["115","116","117","118","119","120","121","122","123","124"],"import React, { useContext, useEffect, useState } from 'react';\r\nimport {useHistory, useParams} from \"react-router-dom\"\r\nimport './assets/css/glitch.css'\r\nimport StepContext from \"../context/StepContext\";\r\nimport Cookie from 'js-cookie'\r\nimport firebase from '../firebase';\r\n\r\nconst Glitch = () => {\r\n    let { id } = useParams();\r\n    const db = firebase.firestore();\r\n    let [step, setStep] = useContext(StepContext)\r\n    var playerIsMouseOver = false;\r\n    var glitchOver = false;\r\n    const ID = Cookie.get('playerID');\r\n    const playerP = 'p'+ID;\r\n\r\n    // Move button\r\n    var leftPos = 0;\r\n    var topPos = 0;\r\n\r\n    const isStepAchieved = () => {\r\n        if(step){\r\n            var glitchs = step.houseSettings.glitch;\r\n            glitchs = Object.entries(glitchs);\r\n            for(var i = 1; i<(glitchs.length)-1; i++){\r\n                if(glitchs[i][0] != 'isActive'){\r\n                    if(glitchs[i][1] == true) {\r\n                        console.log(\"true\");\r\n                    } else {\r\n                        return\r\n                    }\r\n                }\r\n            }\r\n            console.log('you all ok');\r\n        }\r\n        \r\n    }\r\n\r\n    function updateBatch(db, roomID, dataToBatch) {    \r\n        const batch = db.batch();\r\n\r\n        const sfRef = db.collection('Room').doc(roomID);\r\n        sfRef.update(dataToBatch);\r\n\r\n        batch.commit();\r\n    }\r\n\r\n    const desactiveGlitch = () => {\r\n        playerIsMouseOver = true;\r\n        const dataToBatch = {};\r\n        dataToBatch[`houseSettings.glitch.${playerP}`] = true;\r\n        updateBatch(db, id, dataToBatch);\r\n        isStepAchieved(); \r\n    }\r\n    \r\n    const activeGlitch = () => {\r\n        playerIsMouseOver = false;\r\n        const dataToBatch = {};\r\n        dataToBatch[`houseSettings.glitch.${playerP}`] = false;\r\n        updateBatch(db, id, dataToBatch);\r\n        isStepAchieved(); \r\n    }\r\n    \r\n    // Move button\r\n    const checkPosition = () => {\r\n        let glitchContainer = document.getElementById(\"glitch-container\");\r\n        let glitchButton = document.getElementById(\"glitch-button\");\r\n        let maxLeft = glitchContainer.offsetWidth - glitchButton.offsetWidth;\r\n        let maxTop = glitchContainer.offsetHeight - glitchButton.offsetHeight;\r\n        leftPos = Math.floor(Math.random() * maxLeft);\r\n        topPos = Math.floor(Math.random() * maxTop);\r\n    }\r\n    \r\n    const moveButton = () => {\r\n        let glitchButton = document.getElementById(\"glitch-button\");\r\n        glitchButton.style.transform = 'translate(' + leftPos + 'px,' + topPos + 'px)';\r\n        checkPosition();\r\n    }\r\n\r\n    let glitchButton = document.getElementById(\"glitch-button\");\r\n    let glitchContainer = document.getElementById(\"glitch-container\");\r\n\r\n    useEffect(() => {       \r\n        // METTRE EN COMMENTAIRE POUR LES TESTS\r\n        moveButton();\r\n        setInterval(moveButton, 3000)\r\n    })\r\n    return(\r\n        <div id=\"glitch-container\" class=\"active glitch-container\">\r\n            <img src='https://www.etiennemoureton.fr/digital-event/dg-glitch-video.gif' class=\"glitch\"></img>\r\n            <div id=\"glitch-button\" class=\"desactive-glitch p1\" onMouseOver={desactiveGlitch} onMouseLeave={activeGlitch}></div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Glitch",{"ruleId":"125","replacedBy":"126"},{"ruleId":"127","replacedBy":"128"},{"ruleId":"129","severity":1,"message":"130","line":148,"column":1,"nodeType":"131","endLine":152,"endColumn":2},{"ruleId":"132","severity":1,"message":"133","line":2,"column":8,"nodeType":"134","messageId":"135","endLine":2,"endColumn":14},{"ruleId":"132","severity":1,"message":"136","line":4,"column":27,"nodeType":"134","messageId":"135","endLine":4,"endColumn":35},{"ruleId":"132","severity":1,"message":"137","line":10,"column":11,"nodeType":"134","messageId":"135","endLine":10,"endColumn":19},{"ruleId":"138","severity":1,"message":"139","line":17,"column":30,"nodeType":"140","messageId":"141","endLine":17,"endColumn":32},{"ruleId":"132","severity":1,"message":"142","line":20,"column":17,"nodeType":"134","messageId":"135","endLine":20,"endColumn":23},{"ruleId":"143","severity":1,"message":"144","line":42,"column":16,"nodeType":"145","endLine":42,"endColumn":18},{"ruleId":"138","severity":1,"message":"139","line":77,"column":92,"nodeType":"140","messageId":"141","endLine":77,"endColumn":94},{"ruleId":"138","severity":1,"message":"146","line":81,"column":11,"nodeType":"140","messageId":"141","endLine":81,"endColumn":13},{"ruleId":"138","severity":1,"message":"146","line":81,"column":25,"nodeType":"140","messageId":"141","endLine":81,"endColumn":27},{"ruleId":"138","severity":1,"message":"146","line":89,"column":17,"nodeType":"140","messageId":"141","endLine":89,"endColumn":19},{"ruleId":"138","severity":1,"message":"146","line":91,"column":22,"nodeType":"140","messageId":"141","endLine":91,"endColumn":24},{"ruleId":"138","severity":1,"message":"146","line":93,"column":22,"nodeType":"140","messageId":"141","endLine":93,"endColumn":24},{"ruleId":"138","severity":1,"message":"146","line":95,"column":22,"nodeType":"140","messageId":"141","endLine":95,"endColumn":24},{"ruleId":"125","replacedBy":"147"},{"ruleId":"127","replacedBy":"148"},{"ruleId":"132","severity":1,"message":"136","line":1,"column":29,"nodeType":"134","messageId":"135","endLine":1,"endColumn":37},{"ruleId":"132","severity":1,"message":"149","line":6,"column":10,"nodeType":"134","messageId":"135","endLine":6,"endColumn":14},{"ruleId":"132","severity":1,"message":"150","line":6,"column":16,"nodeType":"134","messageId":"135","endLine":6,"endColumn":23},{"ruleId":"132","severity":1,"message":"151","line":1,"column":17,"nodeType":"134","messageId":"135","endLine":1,"endColumn":27},{"ruleId":"132","severity":1,"message":"152","line":4,"column":8,"nodeType":"134","messageId":"135","endLine":4,"endColumn":19},{"ruleId":"132","severity":1,"message":"153","line":9,"column":11,"nodeType":"134","messageId":"135","endLine":9,"endColumn":13},{"ruleId":"132","severity":1,"message":"149","line":10,"column":10,"nodeType":"134","messageId":"135","endLine":10,"endColumn":14},{"ruleId":"132","severity":1,"message":"150","line":10,"column":16,"nodeType":"134","messageId":"135","endLine":10,"endColumn":23},{"ruleId":"138","severity":1,"message":"139","line":29,"column":21,"nodeType":"140","messageId":"141","endLine":29,"endColumn":23},{"ruleId":"132","severity":1,"message":"154","line":31,"column":19,"nodeType":"134","messageId":"135","endLine":31,"endColumn":24},{"ruleId":"143","severity":1,"message":"155","line":64,"column":6,"nodeType":"145","endLine":64,"endColumn":8,"suggestions":"156"},{"ruleId":"132","severity":1,"message":"133","line":8,"column":8,"nodeType":"134","messageId":"135","endLine":8,"endColumn":14},{"ruleId":"132","severity":1,"message":"150","line":12,"column":14,"nodeType":"134","messageId":"135","endLine":12,"endColumn":21},{"ruleId":"132","severity":1,"message":"157","line":20,"column":11,"nodeType":"134","messageId":"135","endLine":20,"endColumn":16},{"ruleId":"138","severity":1,"message":"139","line":21,"column":38,"nodeType":"140","messageId":"141","endLine":21,"endColumn":40},{"ruleId":"138","severity":1,"message":"146","line":42,"column":12,"nodeType":"140","messageId":"141","endLine":42,"endColumn":14},{"ruleId":"138","severity":1,"message":"146","line":50,"column":12,"nodeType":"140","messageId":"141","endLine":50,"endColumn":14},{"ruleId":"132","severity":1,"message":"158","line":10,"column":11,"nodeType":"134","messageId":"135","endLine":10,"endColumn":14},{"ruleId":"132","severity":1,"message":"150","line":12,"column":16,"nodeType":"134","messageId":"135","endLine":12,"endColumn":23},{"ruleId":"138","severity":1,"message":"139","line":46,"column":23,"nodeType":"140","messageId":"141","endLine":46,"endColumn":25},{"ruleId":"132","severity":1,"message":"136","line":1,"column":40,"nodeType":"134","messageId":"135","endLine":1,"endColumn":48},{"ruleId":"132","severity":1,"message":"159","line":2,"column":9,"nodeType":"134","messageId":"135","endLine":2,"endColumn":19},{"ruleId":"132","severity":1,"message":"150","line":11,"column":16,"nodeType":"134","messageId":"135","endLine":11,"endColumn":23},{"ruleId":"132","severity":1,"message":"160","line":13,"column":9,"nodeType":"134","messageId":"135","endLine":13,"endColumn":19},{"ruleId":"138","severity":1,"message":"139","line":26,"column":34,"nodeType":"140","messageId":"141","endLine":26,"endColumn":36},{"ruleId":"138","severity":1,"message":"146","line":27,"column":38,"nodeType":"140","messageId":"141","endLine":27,"endColumn":40},{"ruleId":"132","severity":1,"message":"161","line":57,"column":9,"nodeType":"134","messageId":"135","endLine":57,"endColumn":26},{"ruleId":"132","severity":1,"message":"162","line":80,"column":9,"nodeType":"134","messageId":"135","endLine":80,"endColumn":21},{"ruleId":"132","severity":1,"message":"163","line":81,"column":9,"nodeType":"134","messageId":"135","endLine":81,"endColumn":24},{"ruleId":"164","severity":1,"message":"165","line":90,"column":13,"nodeType":"166","endLine":90,"endColumn":104},"no-native-reassign",["167"],"no-negated-in-lhs",["168"],"import/no-anonymous-default-export","Assign object to a variable before exporting as module default","ExportDefaultDeclaration","no-unused-vars","'Loader' is defined but never used.","Identifier","unusedVar","'useState' is defined but never used.","'playerID' is assigned a value but never used.","eqeqeq","Expected '!==' and instead saw '!='.","BinaryExpression","unexpected","'loader' is assigned a value but never used.","react-hooks/exhaustive-deps","Assignments to the 'step' variable from inside React Hook useEffect will be lost after each render. To preserve the value over time, store it in a useRef Hook and keep the mutable value in the '.current' property. Otherwise, you can move this variable directly inside useEffect.","ArrayExpression","Expected '===' and instead saw '=='.",["167"],["168"],"'step' is assigned a value but never used.","'setStep' is assigned a value but never used.","'useContext' is defined but never used.","'StepContext' is defined but never used.","'id' is assigned a value but never used.","'getID' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'requestDB'. Either include it or remove the dependency array.",["169"],"'query' is assigned a value but never used.","'pos' is assigned a value but never used.","'useHistory' is defined but never used.","'glitchOver' is assigned a value but never used.","'playerIsMouseOver' is assigned a value but never used.","'glitchButton' is assigned a value but never used.","'glitchContainer' is assigned a value but never used.","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","no-global-assign","no-unsafe-negation",{"desc":"170","fix":"171"},"Update the dependencies array to be: [requestDB]",{"range":"172","text":"173"},[1976,1978],"[requestDB]"]